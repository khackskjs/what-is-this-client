<template>
  <div>
    <card-group-list
      :list="cardGroupList"
      @select:cardGroup="onSelectCardGroup"
    />
  </div>
</template>

<script>
import { createNamespacedHelpers, mapActions, mapGetters } from 'vuex'
import CardGroupList from '@/components/cards/CardGroupList'

const cardModule = createNamespacedHelpers('card')

export default {
  name: 'CardListContainer',
  components: {
    CardGroupList,
  },
  props: {
    
  },
  data() {
    return {
      // cardGroupList: [],
    }
  },
  computed: {
    ...cardModule.mapGetters(['groupList']),
    ...mapGetters(['selectedCardGroupUuid']),
    cardGroupList() {
      return this.groupList
    },
  },
  mounted() {
    this.init()
  },
  methods: {
    ...cardModule.mapActions(['getCardGroupList', 'getCardList']),
    ...mapActions(['selectCardGroupUuid']),
    async init() {
      await this.getCardGroupList()
    },
    async onSelectCardGroup({ guid }) {
      // 순서 중요. 카드 리스트를 가져온 후 root state 변경 해야 함
      await this.getCardList(guid)
      await this.selectCardGroupUuid(guid)
      this.$emit('select', guid)
    },
  },
}
</script>

<style>

</style>